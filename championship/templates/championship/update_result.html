{% extends "championship/base.html" %}

{% load crispy_forms_tags %}
{% load static %}

{% block extrahead %}
{% endblock %}

{% block content %}
    <h2>Edit Result of {{ object.player.name }}</h2>

    <form method="post">
        {% csrf_token %}
        {# Manually render form fields #}
        {% for field in form %}
            {% if field.name != 'player_name' %}
                {{ field|as_crispy_field }}
            {% else %}
                <div class="input-group" style="position: relative;">
                    <input type="text" id="player_name" name="player_name" value="{{ form.player_name.value|default_if_none:'' }}" class="form-control" data-autocomplete-url="{% url 'player_autocomplete' %}" autocomplete="off">
                    <div id="autocomplete-dropdown" class="dropdown-menu" style="position: absolute; top: 100%; left: 0; z-index: 1000;">
                    </div>
                </div>
            {% endif %}
        {% endfor %}
        <br>
        <button class="btn btn-secondary" type="submit">Save</button>
    </form>
    <br>
    <div class="d-flex">
        <a class="btn btn-secondary-light ms-3" href="{% url 'event_details' object.event.id %}">Back to Event Details</a>
    </div>
{% endblock %}

{% block scripts %}
    <script src="{% static 'player-autocomplete.js' %}"></script>
{% endblock %}